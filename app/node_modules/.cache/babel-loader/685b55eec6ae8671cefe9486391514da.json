{"ast":null,"code":"// constants\nconst SET_USER = \"session/SET_USER\";\nconst REMOVE_USER = \"session/REMOVE_USER\";\nconst GET_PRODUCT_OF_USER = \"user/products\";\nconst setUser = user => ({\n  type: SET_USER,\n  payload: user\n});\nconst removeUser = () => ({\n  type: REMOVE_USER\n});\nexport const get_user_products = data => {\n  return {\n    type: GET_PRODUCT_OF_USER,\n    payload: data\n  };\n};\nconst initialState = {\n  user: null\n};\nexport const authenticate = () => async dispatch => {\n  const response = await fetch(\"/api/auth/\", {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.ok) {\n    const data = await response.json();\n    if (data.errors) {\n      return;\n    }\n    dispatch(setUser(data));\n  }\n};\nexport const login = (email, password) => async dispatch => {\n  const response = await fetch(\"/api/auth/login\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return [\"An error occurred. Please try again.\"];\n  }\n};\nexport const logout = () => async dispatch => {\n  const response = await fetch(\"/api/auth/logout\", {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.ok) {\n    dispatch(removeUser());\n  }\n};\nexport const signUp = (username, email, password) => async dispatch => {\n  const response = await fetch(\"/api/auth/signup\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      email,\n      password\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return [\"An error occurred. Please try again.\"];\n  }\n};\nexport const getUserProductThunk = user_id => async (dispatch, getState) => {\n  const res = await fetch(`/api/products/user/${user_id}`, {\n    method: \"GET\"\n  });\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(get_user_products(data));\n    return data;\n  }\n};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_USER:\n      return {\n        user: action.payload\n      };\n    case REMOVE_USER:\n      return {\n        user: null\n      };\n    case GET_PRODUCT_OF_USER:\n      {\n        const newState = {\n          ...state,\n          products: {\n            ...state.products\n          }\n        };\n        return newState;\n      }\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["SET_USER","REMOVE_USER","GET_PRODUCT_OF_USER","setUser","user","type","payload","removeUser","get_user_products","data","initialState","authenticate","dispatch","response","fetch","headers","ok","json","errors","login","email","password","method","body","JSON","stringify","status","logout","signUp","username","getUserProductThunk","user_id","getState","res","reducer","state","action","newState","products"],"sources":["/Users/zenw/Capstone/Captone-Project/react-app/src/store/session.js"],"sourcesContent":["// constants\nconst SET_USER = \"session/SET_USER\";\nconst REMOVE_USER = \"session/REMOVE_USER\";\nconst GET_PRODUCT_OF_USER = \"user/products\"\n\n\nconst setUser = (user) => ({\n\ttype: SET_USER,\n\tpayload: user,\n});\n\nconst removeUser = () => ({\n\ttype: REMOVE_USER,\n});\n\nexport const get_user_products = (data) =>{\n    return {\n        type:GET_PRODUCT_OF_USER,\n        payload:data\n\n        \n    }\n}\n\nconst initialState = { user: null };\n\nexport const authenticate = () => async (dispatch) => {\n\tconst response = await fetch(\"/api/auth/\", {\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t});\n\tif (response.ok) {\n\t\tconst data = await response.json();\n\t\tif (data.errors) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch(setUser(data));\n\t}\n};\n\nexport const login = (email, password) => async (dispatch) => {\n\tconst response = await fetch(\"/api/auth/login\", {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\temail,\n\t\t\tpassword,\n\t\t}),\n\t});\n\n\tif (response.ok) {\n\t\tconst data = await response.json();\n\t\tdispatch(setUser(data));\n\t\treturn null;\n\t} else if (response.status < 500) {\n\t\tconst data = await response.json();\n\t\tif (data.errors) {\n\t\t\treturn data.errors;\n\t\t}\n\t} else {\n\t\treturn [\"An error occurred. Please try again.\"];\n\t}\n};\n\nexport const logout = () => async (dispatch) => {\n\tconst response = await fetch(\"/api/auth/logout\", {\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t});\n\n\tif (response.ok) {\n\t\tdispatch(removeUser());\n\t}\n};\n\nexport const signUp = (username, email, password) => async (dispatch) => {\n\tconst response = await fetch(\"/api/auth/signup\", {\n\t\tmethod: \"POST\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tusername,\n\t\t\temail,\n\t\t\tpassword,\n\t\t}),\n\t});\n\n\tif (response.ok) {\n\t\tconst data = await response.json();\n\t\tdispatch(setUser(data));\n\t\treturn null;\n\t} else if (response.status < 500) {\n\t\tconst data = await response.json();\n\t\tif (data.errors) {\n\t\t\treturn data.errors;\n\t\t}\n\t} else {\n\t\treturn [\"An error occurred. Please try again.\"];\n\t}\n};\n\n\nexport const getUserProductThunk = (user_id) => async(dispatch,getState) =>{\n \n \n    const res = await fetch(`/api/products/user/${user_id}`,{\n        method:\"GET\",\n     \n    })\n    if(res.ok){\n        const data = await res.json()\n        dispatch(get_user_products(data))\n        return data\n    }\n}\n\n\nexport default function reducer(state = initialState, action) {\n\tswitch (action.type) {\n\t\tcase SET_USER:\n\t\t\treturn { user: action.payload };\n\t\tcase REMOVE_USER:\n\t\t\treturn { user: null };\n\t\tcase GET_PRODUCT_OF_USER:{\n          \tconst newState = {...state, products:{...state.products}}\n\t\t\t\n\t\t\treturn newState\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}