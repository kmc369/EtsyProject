{"ast":null,"code":"const CREATE_REVIEW = 'create/review';\n\n// ACTIONS\nconst create_review = data => {\n  return {\n    type: CREATE_REVIEW,\n    payload: data\n  };\n};\n\n//THUNKS\n\nexport const createReviewThunk = review => async (dispatch, getState) => {\n  const res = await fetch('/api/review/new_review', {\n    method: \"POST\",\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(review)\n  });\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(create_review(data));\n    return data;\n  }\n};\n\n//startiig\n\n//Reducers \n\nconst initialState = {\n  singleProduct: {},\n  user: {}\n};\nexport const reviewsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case CREATE_REVIEW:\n      {\n        const newState = {\n          ...state,\n          singleProduct: {},\n          user: {\n            ...state.user\n          },\n          allProduct: {\n            ...state.allProduct\n          }\n        };\n        const target = newState.singleProduct[action.payload.id];\n        // newState.allProduct.append[action.payload]\n        if (target) {\n          target.review = action.payload;\n        }\n        newState.user.review = action.payload;\n        return newState;\n      }\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["CREATE_REVIEW","create_review","data","type","payload","createReviewThunk","review","dispatch","getState","res","fetch","method","headers","body","JSON","stringify","ok","json","initialState","singleProduct","user","reviewsReducer","state","action","newState","allProduct","target","id"],"sources":["/Users/zenw/Capstone/Captone-Project/react-app/src/store/review.js"],"sourcesContent":["const CREATE_REVIEW = 'create/review'\n\n\n// ACTIONS\nconst create_review = (data) =>{\n\n    return {\n        type:CREATE_REVIEW,\n        payload:data\n    }\n}\n\n\n\n\n\n\n//THUNKS\n\nexport const createReviewThunk = (review)=>async(dispatch,getState) =>{\n\n    const res = await fetch('/api/review/new_review',{\n        method:\"POST\",\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(review),\n\n    })\n    if(res.ok){\n        const data = await res.json()\n        dispatch(create_review(data))\n        return data\n    }\n\n\n}\n\n\n//startiig\n\n\n\n//Reducers \n\nconst initialState = {singleProduct:{},user:{}}\n\n\nexport const reviewsReducer=(state=initialState ,action)=>{\n\n    switch(action.type){\n      \n      \n      case CREATE_REVIEW: {\n      \n        const newState = { ...state, singleProduct:{}, user:{...state.user}, allProduct:{...state.allProduct} };\n        const target = newState.singleProduct[action.payload.id]\n        // newState.allProduct.append[action.payload]\n        if(target){\n            target.review = action.payload \n        }\n        newState.user.review = action.payload\n        \n      \n        return newState;\n      }\n\n\n        default:\n            return state\n    }\n}\n\n"],"mappings":"AAAA,MAAMA,aAAa,GAAG,eAAe;;AAGrC;AACA,MAAMC,aAAa,GAAIC,IAAI,IAAI;EAE3B,OAAO;IACHC,IAAI,EAACH,aAAa;IAClBI,OAAO,EAACF;EACZ,CAAC;AACL,CAAC;;AAOD;;AAEA,OAAO,MAAMG,iBAAiB,GAAIC,MAAM,IAAG,OAAMC,QAAQ,EAACC,QAAQ,KAAI;EAElE,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,wBAAwB,EAAC;IAC7CC,MAAM,EAAC,MAAM;IACbC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACT,MAAM;EAE/B,CAAC,CAAC;EACF,IAAGG,GAAG,CAACO,EAAE,EAAC;IACN,MAAMd,IAAI,GAAG,MAAMO,GAAG,CAACQ,IAAI,EAAE;IAC7BV,QAAQ,CAACN,aAAa,CAACC,IAAI,CAAC,CAAC;IAC7B,OAAOA,IAAI;EACf;AAGJ,CAAC;;AAGD;;AAIA;;AAEA,MAAMgB,YAAY,GAAG;EAACC,aAAa,EAAC,CAAC,CAAC;EAACC,IAAI,EAAC,CAAC;AAAC,CAAC;AAG/C,OAAO,MAAMC,cAAc,GAAC,YAA8B;EAAA,IAA7BC,KAAK,uEAACJ,YAAY;EAAA,IAAEK,MAAM;EAEnD,QAAOA,MAAM,CAACpB,IAAI;IAGhB,KAAKH,aAAa;MAAE;QAElB,MAAMwB,QAAQ,GAAG;UAAE,GAAGF,KAAK;UAAEH,aAAa,EAAC,CAAC,CAAC;UAAEC,IAAI,EAAC;YAAC,GAAGE,KAAK,CAACF;UAAI,CAAC;UAAEK,UAAU,EAAC;YAAC,GAAGH,KAAK,CAACG;UAAU;QAAE,CAAC;QACvG,MAAMC,MAAM,GAAGF,QAAQ,CAACL,aAAa,CAACI,MAAM,CAACnB,OAAO,CAACuB,EAAE,CAAC;QACxD;QACA,IAAGD,MAAM,EAAC;UACNA,MAAM,CAACpB,MAAM,GAAGiB,MAAM,CAACnB,OAAO;QAClC;QACAoB,QAAQ,CAACJ,IAAI,CAACd,MAAM,GAAGiB,MAAM,CAACnB,OAAO;QAGrC,OAAOoB,QAAQ;MACjB;IAGE;MACI,OAAOF,KAAK;EAAA;AAExB,CAAC"},"metadata":{},"sourceType":"module"}